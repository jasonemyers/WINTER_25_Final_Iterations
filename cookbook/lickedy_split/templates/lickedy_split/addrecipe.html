{% load static %}
<!--needs to be worked on a lot-->
<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Base template configuration use django template in the future--> 
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Add Recipe - Lickty-Split</title>
  <link rel="stylesheet" href="{% static 'lickedy_split/css/add_recipe.css' %}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" >


</head>

<body>
<!-- Navigation  -->
<nav class="navbar">
  <div class="logo">
    <a href="{% url 'profile' %}" class="logo"><img src="{% static 'lickedy_split/images/logo.jpg' %}" alt="logo"></a>
  </div>
    <!-- User Menu Dropdown -->
  <div class="dropdown">
    <button class="dropbtn">
      <i class="fa fa-user"></i>
    </button>
    <div class="dropdown-content">
      <a href="{% url 'home' %}">Home</a>
      <a href="{% url 'recipes' %}">Recipes</a>
      <a href="#">Logout</a>
    </div>
  </div>
</nav>

  <!-- User Menu Dropdown -->
<div class="container">
  <h1>Add a New Recipe</h1>

    <!-- Recipe Form -->
  <form method="POST" enctype="multipart/form-data" id="recipe-form">
    {% csrf_token %}
    
    <!-- Recipe Name Field -->
    <div class="form-group">
      <label>Recipe Name</label>
      {{ form.name }}
      {{ form.name.errors }}
    </div>

    <!-- Description Field -->
    <div class="form-group">
      <label>Description</label>
      {{ form.description }}
      {{ form.description.errors }}
    </div>

    <!-- Notes Field -->
    <div class="form-group">
      <label>Recipe Notes</label>
      {{ form.notes }}
      {{ form.notes.errors }}
    </div>

    <!-- Tags Section -->
    <div class="tag-section">
      <label>Tags</label>
      <div class="predefined-tags">
        <button type="button" class="tag-option">Appetizers</button>
        <button type="button" class="tag-option">Asian</button>
        <button type="button" class="tag-option">Baked Goods</button>
        <button type="button" class="tag-option">Breakfast</button>
        <button type="button" class="tag-option">Condiments and Sauces</button>
        <button type="button" class="tag-option">Dessert</button>
        <button type="button" class="tag-option">Dinner</button>
        <button type="button" class="tag-option">Drinks</button>
        <button type="button" class="tag-option">Healthy</button>
        <button type="button" class="tag-option">Indian</button>
        <button type="button" class="tag-option">Italian</button>
        <button type="button" class="tag-option">Lunch</button>
        <button type="button" class="tag-option">Meat</button>
        <button type="button" class="tag-option">Mexican</button>
        <button type="button" class="tag-option">Pasta</button>
        <button type="button" class="tag-option">Salads</button>
        <button type="button" class="tag-option">Seafood</button>
        <button type="button" class="tag-option">Side Dishes</button>
        <button type="button" class="tag-option">Smoothies</button>
        <button type="button" class="tag-option">Snacks</button>
        <button type="button" class="tag-option">Soup</button>
        <button type="button" class="tag-option">Vegetarian</button>
      </div>

      <button type="button" class="manage-tags-btn">
        <ion-icon name="pricetag-outline"></ion-icon>
        Add / Manage tags
      </button>
    </div>



    <!-- Prep & Cook Time in one row -->
    <div class="time-group">
      <!-- Prep Time -->
      <div class="form-group">
        <label>Prep Time (minutes)</label>
        {{ form.prep_time }}
        {{ form.prep_time.errors }}
      </div>

      <!-- Cook Time -->
      <div class="form-group">
        <label>Cook Time (minutes)</label>
        {{ form.cook_time }}
        {{ form.cook_time.errors }}
      </div>
    </div>


    <!-- Dynamic Ingredients Section -->
    <div class="ingredient-section">
      <label>Ingredients</label>
      <div id="ingredient-container"></div>
      
      <!-- Ingredient Template  -->
      <template id="ingredient-template">
        <div class="ingredient-row">
          <!-- Existing Ingredients Dropdown -->
          <div class="ingredient-select">
            <select name="ingredient_{index}">
              <option value="">Select Existing Ingredient</option>
              {% for ingredient in ingredients %}
              <option value="{{ ingredient.id }}">{{ ingredient.name }}</option>
              {% endfor %}
            </select>
          </div>

          <!-- Amount Input -->
          <input type="number" name="amount_{index}" step="0.1" placeholder="Amount" required>

          <!-- Measurement Select -->
          <select name="measurement_{index}" required>
            {% for value, text in measurement_choices %}
            <option value="{{ value }}">{{ text }}</option>
            {% endfor %}
          </select>

          <!-- New Ingredient Field -->
          <div class="new-ingredient">
            <input type="text" name="new_ingredient_{index}" placeholder="Or enter replace ingredient">
          </div>
          <!-- Remove Button -->
          <button type="button" class="remove-ingredient">Ã—</button>
        </div>
      </template>

      <!-- Add Ingredient Button -->
      <button type="button" class="add-another" id="add-ingredient">Add Another Ingredient</button>
    </div>

    <!-- Instructions Field -->
    <div class="form-group">
      <label>Instructions</label>
      {{ form.instructions }}
      {{ form.instructions.errors }}
    </div>

    <!-- Image Upload Field -->
    <div class="form-group">
      <label>Recipe Image (optional)</label>
      {{ form.recipe_pic }}
      {{ form.recipe_pic.errors }}
    </div>

    <!-- Favorite & Rating in a row -->
    <div class="form-row">
      <!-- Favorite Heart Toggle -->
      <div class="form-group icon-group">
        <label class="heart-toggle">
          <input type="checkbox" name="favorite" id="favorite-checkbox" hidden>
          <i class="fa fa-heart" id="heart-icon"></i>
          <span>Mark as Favorite</span>
        </label>
        {{ form.favorite.errors }}
      </div>


      <!-- Rating Field -->
      <div class="form-group icon-group">
        <label>Rating </label>
        <div class="star-rating">
          <input type="hidden" name="rating" id="rating-value" value="0">
          <i class="fa fa-star" data-value="1"></i>
          <i class="fa fa-star" data-value="2"></i>
          <i class="fa fa-star" data-value="3"></i>
          <i class="fa fa-star" data-value="4"></i>
          <i class="fa fa-star" data-value="5"></i>
        </div>
        {{ form.rating.errors }}
      </div>

    </div>


    <!-- Delete Button (only show if editing an existing recipe) -->
    {% if recipe %}
    <form method="POST" action="{% url 'delete_recipe' recipe.id %}">
      {% csrf_token %}
      <button type="submit" class="delete-btn">Delete Recipe</button>
    </form>
    {% endif %}

    <!-- Form Submission -->
    <button type="submit" class="submit-btn">Save Recipe</button>
  </form>
</div>

</body>
</html>